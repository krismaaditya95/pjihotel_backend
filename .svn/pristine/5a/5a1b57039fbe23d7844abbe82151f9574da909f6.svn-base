package com.mini.project.hotel.model;

import java.io.Serializable;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

import com.fasterxml.jackson.annotation.JsonIgnore;

//@Entity(name = "Transaksi")
@Entity
@Table(name = "transaksi")
public class Transaksi implements Serializable{
	
	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	private Integer idTransaksi;
	
	//@ManyToOne //(fetch = FetchType.LAZY, optional = false)
	//@JoinColumn //(name = "nama_customer", referencedColumnName = "nama_customer", nullable = false)
	//@OnDelete(action = OnDeleteAction.CASCADE)
	//@JsonIgnore
	
	@Column(nullable = false, insertable = false, updatable = false)
	private int idCustomer;
	

	
//	@JoinColumn(name = "id_customer", referencedColumnName = "id_customer")
	@ManyToOne(fetch = FetchType.LAZY, optional = false)
	@JoinColumn(name = "idCustomer", nullable = false)
	@JsonIgnore
	private Customer customer;
	
	public Customer getCustomer() {
		return customer;
	}

	public void setCustomer(Customer customer) {
		this.customer = customer;
	}
	
	
//	@Column(nullable = false)
//	public String nama_cust = customer.getNama_customer();
	
	@Column(name = "id_room", insertable = false, updatable = false)
	private int idRoom;
	
	@ManyToOne(fetch = FetchType.LAZY, optional = false)
	@JoinColumn(name = "id_room", nullable = false)
	@JsonIgnore
	private Room room;
	
	public Room getRoom() {
		return room;
	}
	public void setRoom(Room room) {
		this.room = room;
	}
	
//	TIPE DATE FORMAT
//	@Column(name = "check_in_date", nullable = false)
//	DateFormat check_in_date = new SimpleDateFormat("yyyy-MM-dd");
//	
//	@Column(name = "check_out_date", nullable = false)
//	DateFormat check_out_date = new SimpleDateFormat("yyyy-MM-dd");
//	
//	@Column(name = "check_in_time", nullable = false)
//	DateFormat check_in_time = new SimpleDateFormat("HH:mm");
//	
//	@Column(name = "check_out_time", nullable = false)
//	DateFormat check_out_time = new SimpleDateFormat("HH:mm");
	
	
	// TIPE STRING TRUS BARU DICONVERT KE DATE
//	@Column(name = "check_in_date", nullable = false)
//	public String check_in_date;
//	
//	@Column(name = "check_in_time", nullable = false)
//	public String check_in_time;
//	
//	@Column(name = "check_out_date", nullable = false)
//	public String check_out_date;
//	
//	@Column(name = "check_out_time", nullable = false)
//	public String check_out_time;
	
	// Tipe Date
	@Column(name = "check_in_date", nullable = false)
	private Date checkInDate;

	@Column(name = "check_in_time", nullable = false)
	private Date checkInTime;
	
	@Column(name = "check_out_date", nullable = false)
	private Date checkOutDate;
	
	@Column(name = "check_out_time", nullable = false)
	private Date checkOutTime;
	
	@Column(name = "id_status_check", nullable = false)
	private int idStatusCheck;
	
	@Column(name = "total_harga", nullable = false)
	private int totalHarga;
	
//	public Date getCheck_in_date() {
//		return check_in_date;
//	}
//
//	public void setCheck_in_date(Date check_in_date) {
//		this.check_in_date = check_in_date;
//	}
//
//	public Date getCheck_in_time() {
//		return check_in_time;
//	}
//
//	public void setCheck_in_time(Date check_in_time) {
//		this.check_in_time = check_in_time;
//	}
//
//	public Date getCheck_out_date() {
//		return check_out_date;
//	}
//
//	public void setCheck_out_date(Date check_out_date) {
//		this.check_out_date = check_out_date;
//	}
//
//	public Date getCheck_out_time() {
//		return check_out_time;
//	}
//
//	public void setCheck_out_time(Date check_out_time) {
//		this.check_out_time = check_out_time;
//	}
	// ===================================================

	public Transaksi() {
		
	}
	
	public Transaksi(String check_in_date, String check_in_time, String check_out_date, String check_out_time, int id_status_check, int total_harga) throws ParseException {
		
		DateFormat cid_format = new SimpleDateFormat("yyyy-MM-dd");
		DateFormat cod_format = new SimpleDateFormat("yyyy-MM-dd");
		DateFormat cit_format = new SimpleDateFormat("HH:mm");
		DateFormat cot_format = new SimpleDateFormat("HH:mm");
		
		Date cid_format_parsed = cid_format.parse(check_in_date);
		Date cod_format_parsed = cod_format.parse(check_out_date);
		Date cit_format_parsed = cit_format.parse(check_in_time);
		Date cot_format_parsed = cot_format.parse(check_out_time);
		
//		this.check_in_date = cid_format_parsed;
//		this.check_in_time = cit_format_parsed;
//		this.check_out_date = cod_format_parsed;
//		this.check_out_time = cot_format_parsed;
//		this.id_status_check = id_status_check;
//		this.total_harga = total_harga;
		
		this.checkInDate = cid_format_parsed;
		this.checkInTime = cit_format_parsed;
		this.checkOutDate = cod_format_parsed;
		this.checkOutTime = cot_format_parsed;
		this.idStatusCheck = id_status_check;
		this.totalHarga = total_harga;
	}
	
	public Transaksi(int id_customer, Integer id_room, String check_in_date, String check_in_time, String check_out_date, String check_out_time, int id_status_check, int total_harga) throws ParseException {
		
//		this.id_customer = id_customer;
//		this.id_room = id_room;
		this.idCustomer = id_customer;
		this.idRoom = id_room;
		
		DateFormat cid_format = new SimpleDateFormat("yyyy-MM-dd");
		DateFormat cod_format = new SimpleDateFormat("yyyy-MM-dd");
		DateFormat cit_format = new SimpleDateFormat("HH:mm");
		DateFormat cot_format = new SimpleDateFormat("HH:mm");
		
		Date cid_format_parsed = cid_format.parse(check_in_date);
		Date cod_format_parsed = cod_format.parse(check_out_date);
		Date cit_format_parsed = cit_format.parse(check_in_time);
		Date cot_format_parsed = cot_format.parse(check_out_time);
		
//		this.check_in_date = cid_format_parsed;
//		this.check_in_time = cit_format_parsed;
//		this.check_out_date = cod_format_parsed;
//		this.check_out_time = cot_format_parsed;
//		this.id_status_check = id_status_check;
//		this.total_harga = total_harga;
		
		this.checkInDate = cid_format_parsed;
		this.checkInTime = cit_format_parsed;
		this.checkOutDate = cod_format_parsed;
		this.checkOutTime = cot_format_parsed;
		this.idStatusCheck = id_status_check;
		this.totalHarga = total_harga;
	}

	public Integer getIdTransaksi() {
		return idTransaksi;
	}

	public void setIdTransaksi(Integer idTransaksi) {
		this.idTransaksi = idTransaksi;
	}

	public int getIdCustomer() {
		return idCustomer;
	}

	public void setIdCustomer(int idCustomer) {
		this.idCustomer = idCustomer;
	}

	public int getIdRoom() {
		return idRoom;
	}

	public void setIdRoom(int idRoom) {
		this.idRoom = idRoom;
	}

	public Date getCheckInDate() {
		return checkInDate;
	}

	public void setCheckInDate(Date checkInDate) {
		this.checkInDate = checkInDate;
	}

	public Date getCheckInTime() {
		return checkInTime;
	}

	public void setCheckInTime(Date checkInTime) {
		this.checkInTime = checkInTime;
	}

	public Date getCheckOutDate() {
		return checkOutDate;
	}

	public void setCheckOutDate(Date checkOutDate) {
		this.checkOutDate = checkOutDate;
	}

	public Date getCheckOutTime() {
		return checkOutTime;
	}

	public void setCheckOutTime(Date checkOutTime) {
		this.checkOutTime = checkOutTime;
	}

	public int getIdStatusCheck() {
		return idStatusCheck;
	}

	public void setIdStatusCheck(int idStatusCheck) {
		this.idStatusCheck = idStatusCheck;
	}

	public int getTotalHarga() {
		return totalHarga;
	}

	public void setTotalHarga(int totalHarga) {
		this.totalHarga = totalHarga;
	}
}
